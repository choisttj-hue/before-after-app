<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Before & After - 변화의 순간들</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkJlZm9yZSAmIEFmdGVyIiwKICAic2hvcnRfbmFtZSI6ICJCZWZvcmVBZnRlciIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZmZmZmZmIiwKICAidGhlbWVfY29sb3IiOiAiIzk5MzNmZiIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1USTRJaUJvWldsbmFIUTlJakV5T0NJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0OGNtVmpkQ0IzYVdSMGFEMGlNVEk0SWlCb1pXbG5hSFE5SWpFeU9DSWdabWxzYkQwaVl6azVNek0yWmlJdlBqeDBaWGgwSUhnOUlqWTBJaUI1UFNJMk5DSWdkR1Y0ZEMxaGJtTm9iM0k5SW0xcFpHUnNaU0lnWm05dWRDMXphWHBsUFNJeU5DSWdabWxzYkQwaUkyWm1abVptWmlJK1FrVkdUMUpGSUNZZ1FVWlVSVkk4TDNSbGVIUStQQzl6ZG1jKyIsCiAgICAgICJzaXplcyI6ICIxMjh4MTI4IiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    <style>
        .slider-container input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
            width: 100%;
        }
        
        .slider-container input[type="range"]::-webkit-slider-track {
            background: rgba(255, 255, 255, 0.3);
            height: 4px;
            border-radius: 2px;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            background: #ffffff;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            border: 2px solid #9333ea;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider-container input[type="range"]::-moz-range-track {
            background: rgba(255, 255, 255, 0.3);
            height: 4px;
            border-radius: 2px;
        }
        
        .slider-container input[type="range"]::-moz-range-thumb {
            background: #ffffff;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            border: 2px solid #9333ea;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide React Icons (simplified)
        const Heart = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const MessageCircle = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
            </svg>
        );

        const Share = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
        );

        const Camera = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                <circle cx="12" cy="13" r="4"></circle>
            </svg>
        );

        const User = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        );

        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const BeforeAfterApp = () => {
            const [posts, setPosts] = useState([
                {
                    id: 1,
                    user: { name: '김민수', username: 'minsu_fit', avatar: '🏋️‍♂️' },
                    beforeImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmZGRkZCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE2IiBmaWxsPSIjOTk5Ij5CRUZPUkU8L3RleHQ+PHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5OTkiPjIwMjMuMDEuMDE8L3RleHQ+PC9zdmc+',
                    afterImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2VkZmRlZCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE2IiBmaWxsPSIjMjI3NzIyIj5BRlRFUjwvdGV4dD4KPHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiMyMjc3MjIiPjIwMjQuMDEuMDE8L3RleHQ+PC9zdmc+',
                    caption: '1년간의 꾸준한 운동 결과! 매일 30분씩 홈트레이닝 + 식단관리 💪',
                    tags: ['#홈트레이닝', '#다이어트', '#1년챌린지', '#변화'],
                    likes: 234,
                    comments: 45,
                    timeAgo: '2시간 전',
                    duration: '12개월'
                },
                {
                    id: 2,
                    user: { name: '박지영', username: 'jiyoung_home', avatar: '🏠' },
                    beforeImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjY2Ij5CRUZPRUE8L3RleHQ+PHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM2NjYiPuychOumvOyduO2FreumrDwvdGV4dD48L3N2Zz4=',
                    afterImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmZjhmMCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE2IiBmaWxsPSIjZGQ3NzAwIj5BRlRFUjwvdGV4dD4KPHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNkZDc3MDAiPuyYiOu6jO2VnCDsnbTsnIXtiLA8L3RleHQ+PC9zdmc+',
                    caption: '작은 원룸도 이렇게 예쁘게! DIY로 만든 수납공간과 조명으로 완전히 새로운 느낌 ✨',
                    tags: ['#원룸인테리어', '#DIY', '#수납정리', '#미니멀'],
                    likes: 156,
                    comments: 23,
                    timeAgo: '5시간 전',
                    duration: '2주'
                },
                {
                    id: 3,
                    user: { name: '이준호', username: 'junho_dev', avatar: '💻' },
                    beforeImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmZjVmNSIvPjx0ZXh0IHg9IjE1MCIgeT0iMTIwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5Ij5CRUZMR1E8L3RleHQ+PHRleHQgeD0iMTUwIiB5PSIxNDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5OTkiPkphdmFTY3JpcHQ8L3RleHQ+PHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM5OTkiPuq4sOuPtCDspoDsi4jquLA8L3RleHQ+PHRleHQgeD0iMTUwIiB5PSIxODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM5OTkiPu2FnOqwgCDsi5jqsIA8L3RleHQ+PC9zdmc+',
                    afterImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y5ZmJmZiIvPjx0ZXh0IHg9IjE1MCIgeT0iMTIwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzMzIj5BRlRFUjwvdGV4dD4KPHRleHQgeD0iMTUwIiB5PSIxNDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiMzMzMiPlJlYWN0ICsgVFM8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzMzIj7quLDsl4UgqLOysggg+1kIODt5g7g8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzMzIj7tlZDroZzsobDtlLQ8L3RleHQ+PC9zdmc+',
                    caption: '6개월 독학으로 프런트엔드 개발자 취업 성공! 매일 코딩하고 프로젝트 만들기를 반복했어요 🚀',
                    tags: ['#코딩독학', '#프런트엔드', '#취업성공', '#React'],
                    likes: 89,
                    comments: 67,
                    timeAgo: '1일 전',
                    duration: '6개월'
                },
                {
                    id: 4,
                    user: { name: '최수연', username: 'suyeon_beauty', avatar: '💄' },
                    beforeImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmZjVmOCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE0IiBmaWxsPSIjYWE2Njg4Ij5CRUZPUEU8L3RleHQ+PHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNhYTY2ODgiPuuCmOyDpOumrOyKpO2CrOyWhTwvdGV4dD48L3N2Zz4=',
                    afterImage: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmZjBmNSIvPjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE0IiBmaWxsPSIjZDA5NjdkIj5BRlRFUjwvdGV4dD4KPHRleHQgeD0iMTUwIiB5PSIxNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNkMDk2N2QiPuygnOq4sOuCmOyDpOq5iOyWrTwvdGV4dD48L3N2Zz4=',
                    caption: '3개월 스킨케어 루틴 변화! 제품보다 꾸준함이 중요하다는 걸 깨달았어요 ✨',
                    tags: ['#스킨케어', '#뷰티루틴', '#3개월챌린지', '#꾸준함'],
                    likes: 312,
                    comments: 89,
                    timeAgo: '3시간 전',
                    duration: '3개월'
                }
            ]);

            const [currentSlider, setCurrentSlider] = useState({});

            const handleSliderChange = (postId, value) => {
                setCurrentSlider(prev => ({
                    ...prev,
                    [postId]: value
                }));
            };

            const PostCard = ({ post }) => {
                const sliderValue = currentSlider[post.id] || 0;
                
                return (
                    <div className="bg-white rounded-lg shadow-md mb-6 overflow-hidden">
                        {/* Header */}
                        <div className="flex items-center p-4">
                            <div className="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-lg mr-3">
                                {post.user.avatar}
                            </div>
                            <div className="flex-1">
                                <h3 className="font-semibold text-sm">{post.user.name}</h3>
                                <p className="text-gray-500 text-xs">@{post.user.username} • {post.timeAgo}</p>
                            </div>
                            <div className="bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium">
                                {post.duration}
                            </div>
                        </div>

                        {/* Before & After Images with Slider */}
                        <div className="relative">
                            <div className="relative overflow-hidden" style={{ height: '300px' }}>
                                {/* Before Image */}
                                <img 
                                    src={post.beforeImage} 
                                    alt="Before" 
                                    className="absolute inset-0 w-full h-full object-cover"
                                />
                                
                                {/* After Image with clip-path */}
                                <img 
                                    src={post.afterImage} 
                                    alt="After" 
                                    className="absolute inset-0 w-full h-full object-cover"
                                    style={{
                                        clipPath: `inset(0 ${100 - sliderValue}% 0 0)`
                                    }}
                                />
                                
                                {/* Slider Control */}
                                <div className="absolute bottom-4 left-4 right-4">
                                    <div className="slider-container flex items-center bg-black bg-opacity-60 rounded-full px-4 py-3 backdrop-blur-sm">
                                        <span className="text-white text-xs font-medium mr-3">BEFORE</span>
                                        <input
                                            type="range"
                                            min="0"
                                            max="100"
                                            value={sliderValue}
                                            onChange={(e) => handleSliderChange(post.id, e.target.value)}
                                            className="flex-1 mx-2"
                                        />
                                        <span className="text-white text-xs font-medium ml-3">AFTER</span>
                                    </div>
                                </div>
                                
                                {/* Divider Line */}
                                <div 
                                    className="absolute top-0 bottom-0 w-0.5 bg-white shadow-lg"
                                    style={{ left: `${sliderValue}%` }}
                                />
                            </div>
                        </div>

                        {/* Content */}
                        <div className="p-4">
                            <p className="text-sm mb-3 leading-relaxed">{post.caption}</p>
                            
                            {/* Tags */}
                            <div className="flex flex-wrap gap-2 mb-4">
                                {post.tags.map((tag, index) => (
                                    <span key={index} className="bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs hover:bg-gray-200 cursor-pointer transition-colors">
                                        {tag}
                                    </span>
                                ))}
                            </div>

                            {/* Actions */}
                            <div className="flex items-center justify-between pt-3 border-t border-gray-100">
                                <div className="flex items-center space-x-6">
                                    <button className="flex items-center space-x-2 text-gray-600 hover:text-red-500 transition-colors">
                                        <Heart size={20} />
                                        <span className="text-sm font-medium">{post.likes}</span>
                                    </button>
                                    <button className="flex items-center space-x-2 text-gray-600 hover:text-blue-500 transition-colors">
                                        <MessageCircle size={20} />
                                        <span className="text-sm font-medium">{post.comments}</span>
                                    </button>
                                    <button className="text-gray-600 hover:text-green-500 transition-colors">
                                        <Share size={20} />
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white shadow-sm border-b sticky top-0 z-10">
                        <div className="max-w-md mx-auto px-4 py-3">
                            <div className="flex items-center justify-between">
                                <h1 className="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                                    Before & After
                                </h1>
                                <div className="flex items-center space-x-3">
                                    <button className="p-2 hover:bg-gray-100 rounded-full transition-colors">
                                        <Camera size={24} />
                                    </button>
                                    <button className="p-2 hover:bg-gray-100 rounded-full transition-colors">
                                        <User size={24} />
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-md mx-auto">
                        <div className="p-4">
                            {/* Welcome Message */}
                            <div className="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg p-4 mb-6">
                                <h2 className="text-lg font-bold mb-2">변화의 순간을 공유하세요! 🌟</h2>
                                <p className="text-sm opacity-90">당신의 Before & After 스토리로 다른 사람들에게 영감을 주세요</p>
                            </div>

                            {posts.map(post => (
                                <PostCard key={post.id} post={post} />
                            ))}
                            
                            {/* Load More */}
                            <div className="text-center py-8">
                                <button className="bg-gray-100 hover:bg-gray-200 px-6 py-3 rounded-full text-gray-700 font-medium transition-colors">
                                    더 많은 스토리 보기
                                </button>
                            </div>
                        </div>
                    </main>

                    {/* Floating Action Button */}
                    <button className="fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-105">
                        <Plus size={24} />
                    </button>

                    {/* PWA Install Prompt (Hidden by default) */}
                    <div id="install-prompt" className="fixed bottom-20 left-4 right-4 bg-white rounded-lg shadow-xl p-4 hidden">
                        <div className="flex items-center justify-between">
                            <div>
                                <h3 className="font-bold text-sm">앱으로 설치하기</h3>
                                <p className="text-xs text-gray-600">홈 화면에 추가하여 더 편리하게 사용하세요</p>
                            </div>
                            <button id="install-btn" className="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                설치
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<BeforeAfterApp />, document.getElementById('root'));

        // PWA Installation
        let deferredPrompt;
        const installPrompt = document.getElementById('install-prompt');
        const installBtn = document.getElementById('install-btn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installPrompt.classList.remove('hidden');
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                installPrompt.classList.add('hidden');
            }
        });

        // Service Worker Registration (for PWA)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'before-after-v1';
                    const urlsToCache = ['/'];
                    
                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => response || fetch(event.request))
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(() => console.log('Service Worker registered'))
                    .catch(() => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
